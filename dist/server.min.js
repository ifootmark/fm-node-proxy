"use strict";var express=require("express"),bodyParser=require("body-parser"),url=require("url"),querystring=require("querystring"),fmconfig=require("../fm.config.js"),port=fmconfig.api_port,api_prefix=fmconfig.api_prefix?fmconfig.api_prefix:"",app=express(),get_handle=function(r,e){var i=[];i=url.parse(r.url,!0).query,e.send(JSON.stringify(i))},post_handle=function(r,e){r.setEncoding("utf-8");var i="";r.addListener("data",function(r){i+=r}),r.addListener("end",function(){var r=querystring.parse(i);e.send(JSON.stringify(r))})},server={start:function(){app.get("/"+api_prefix+"*",get_handle),app.post("/"+api_prefix+"*",post_handle),app.listen(port),console.log("Server listening on port "+port)}};module.exports=server;